{
  "id": "019c6205-8ae1-7699-ab19-6754f57c2724",
  "title": "Copilot",
  "messages": [
    {
      "role": "user",
      "content": "/scan",
      "timestamp": "2026-02-15T15:57:54.522Z"
    },
    {
      "role": "assistant",
      "content": "# SpecBook Feature Structure Document\n\n## 1. Project Overview\n\n**Project Name**: SpecBook  \n**Tech Stack**: TypeScript, Node.js, Electron, React, Next.js, VS Code Extension API  \n**Frameworks**: Electron (desktop), Next.js (web), VS Code Extension API  \n**Languages**: TypeScript, CSS, HTML  \n\nSpecBook is a multi-platform specification management and AI-powered analysis tool that provides desktop, web, and VS Code extension interfaces for managing technical specifications, glossaries, and knowledge bases with integrated AI capabilities.\n\n## 2. Module / Package Structure\n\n| Module | Path | Responsibility |\n|--------|------|---------------|\n| AI Package | `/packages/ai/` | AI service integration, prompt management, and document scanning |\n| Desktop App | `/packages/desktop/` | Electron-based desktop application with full feature set |\n| VS Code Extension | `/packages/extension/` | VS Code integration for spec management within the editor |\n| Shared Types | `/packages/shared/` | Common types, validations, and messages across all platforms |\n| Web App | `/packages/web/` | Next.js web application (minimal implementation) |\n\n## 3. Feature Breakdown\n\n### **Specification Management**\n- **Key Components**: \n  - `specStore.ts`, `specHandlers.ts` (desktop backend)\n  - `SpecPage.tsx`, `SpecTable.tsx`, `SpecForm.tsx`, `SpecDetailPanel.tsx` (desktop UI)\n  - `useSpecs.ts` (React hooks)\n  - `specFileSystem.ts` (VS Code extension)\n- **Data Flow**: User creates/edits specs → IPC handlers → Store persistence → UI updates\n\n### **AI Analysis & Chat**\n- **Key Components**:\n  - `anthropicAdapter.ts`, `service.ts`, `scanner.ts` (AI package)\n  - `aiHandlers.ts`, `chatHandlers.ts` (desktop IPC)\n  - `AiAnalysisPage.tsx`, `PlaygroundPage.tsx` (desktop UI)\n  - `useAiConfig.ts`, `useChat.ts` (React hooks)\n- **Data Flow**: User input → AI service → Anthropic API → Response processing → UI display\n\n### **Knowledge Base Management**\n- **Key Components**:\n  - `knowledgeStore.ts`, `knowledgeHandlers.ts` (desktop backend)\n  - `KnowledgePage.tsx` (desktop UI)\n  - `useKnowledge.ts` (React hooks)\n- **Data Flow**: Knowledge entries → Store management → Search/retrieval → UI presentation\n\n### **Glossary Management**\n- **Key Components**:\n  - `glossaryStore.ts`, `glossaryHandlers.ts` (desktop backend)\n  - `GlossaryPage.tsx` (desktop UI)\n  - `useGlossary.ts` (React hooks)\n- **Data Flow**: Term definitions → Store persistence → Cross-reference linking → UI display\n\n### **VS Code Integration**\n- **Key Components**:\n  - `extension.ts` (main extension entry)\n  - `SpecPanel.ts`, `SpecSidebarProvider.ts` (panel management)\n  - `specPanelHtml.ts` (webview content)\n- **Data Flow**: VS Code commands → Extension handlers → Webview panels → File system operations\n\n## 4. Architecture Diagram\n\n```mermaid\ngraph TD\n    A[Shared Types Package] --> B[Desktop App]\n    A --> C[VS Code Extension]\n    A --> D[Web App]\n    A --> E[AI Package]\n    \n    B --> F[Electron Main Process]\n    B --> G[Electron Renderer]\n    \n    F --> H[Infrastructure Layer]\n    F --> I[IPC Handlers]\n    \n    H --> J[Spec Store]\n    H --> K[Chat Store]\n    H --> L[Glossary Store]\n    H --> M[Knowledge Store]\n    \n    G --> N[React Components]\n    G --> O[Page Containers]\n    G --> P[Custom Hooks]\n    \n    E --> Q[Anthropic Adapter]\n    E --> R[AI Service]\n    E --> S[Document Scanner]\n    \n    C --> T[VS Code API]\n    C --> U[Webview Panels]\n    C --> V[File System]\n    \n    D --> W[Next.js App]\n    \n    I --> E\n    P --> I\n```\n\n## 5. Key Data Models / Concepts\n\n| Concept | Location | Description |\n|---------|----------|-------------|\n| Spec | `/packages/shared/src/spec/types.ts` | Core specification document structure |\n| Chat Message | `/packages/shared/src/spec/messages.ts` | AI chat interaction data model |\n| Validation Rules | `/packages/shared/src/spec/validations.ts` | Data validation schemas |\n| AI Configuration | `/packages/desktop/src/main/infrastructure/appConfig.ts` | AI service settings and API keys |\n| Knowledge Entry | `/packages/desktop/src/main/infrastructure/knowledgeStore.ts` | Knowledge base item structure |\n| Glossary Term | `/packages/desktop/src/main/infrastructure/glossaryStore.ts` | Term definition and metadata |\n\n## 6. API / Interface Surface\n\n### **IPC Channels (Electron)**\n- Spec management: Create, read, update, delete specifications\n- AI operations: Chat interactions, document analysis, configuration\n- Knowledge base: CRUD operations for knowledge entries\n- Glossary: Term management and cross-referencing\n\n### **VS Code Extension Commands**\n- Spec panel activation and management\n- Sidebar provider for specification browsing\n- File system integration for spec documents\n\n### **AI Service Interface**\n- Anthropic Claude API integration\n- Document scanning and analysis\n- Prompt management and response processing\n\n## 7. Dependencies & Integrations\n\n| Dependency | Purpose | Location |\n|------------|---------|----------|\n| Electron | Desktop application framework | Desktop package |\n| React | UI framework for desktop renderer | Desktop package |\n| Next.js | Web application framework | Web package |\n| VS Code API | Extension development | Extension package |\n| Anthropic SDK | AI service integration | AI package |\n| TypeScript | Type safety across all packages | All packages |\n| Vite/ESBuild | Build tooling | Desktop/Extension |\n| Mermaid | Diagram rendering | Desktop components |\n\n### **External Services**\n- **Anthropic Claude API**: AI-powered document analysis and chat functionality\n- **File System**: Local storage for specifications, knowledge base, and configuration\n- **VS Code Workspace**: Integration with development environment for spec management",
      "timestamp": "2026-02-15T15:58:18.184Z"
    }
  ],
  "createdAt": "2026-02-15T15:57:36.353Z",
  "updatedAt": "2026-02-15T15:58:18.184Z"
}
